{"ast":null,"code":"import _slicedToArray from\"/var/www/html/farihatulmaria/farihatulmaria/programming-hero/Module-notes/Module-71/doctor-portal/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from'axios';import{useEffect,useState}from'react';var useOnSubmit=function useOnSubmit(user){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),token=_useState2[0],setToken=_useState2[1];useEffect(function(){var _user$user,_user$user2;var email=user===null||user===void 0?void 0:(_user$user=user.user)===null||_user$user===void 0?void 0:_user$user.email;var name=user===null||user===void 0?void 0:(_user$user2=user.user)===null||_user$user2===void 0?void 0:_user$user2.displayName;var tokenUser={name:name,email:email};if(email){axios.put(\"http://localhost:5000/users/\".concat(email),{user:tokenUser}).then(function(res){var _res$data;var accessToken=res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.token;localStorage.setItem('accessToken',accessToken);setToken(accessToken);});}},[user]);return[token];};export default useOnSubmit;","map":{"version":3,"names":["axios","useEffect","useState","useOnSubmit","user","token","setToken","email","name","displayName","tokenUser","put","then","res","accessToken","data","localStorage","setItem"],"sources":["/var/www/html/farihatulmaria/farihatulmaria/programming-hero/Module-notes/Module-71/doctor-portal/src/hooks/useToken.jsx"],"sourcesContent":["import axios from 'axios';\nimport { useEffect, useState } from 'react';\nconst useOnSubmit = (user) => {\n    const [token, setToken] = useState('');\n    useEffect(() => {\n        const email =  user?.user?.email;\n        const name = user?.user?.displayName;\n        const tokenUser = {name:name,email:email};\n        \n        if(email){\n            axios.put(`http://localhost:5000/users/${email}`,{\n                user: tokenUser,\n            })\n            .then(res=>{\n                const accessToken = res?.data?.token;\n                localStorage.setItem('accessToken',accessToken)\n                setToken(accessToken)\n            })\n        }\n    }, [user])\n    return [token]\n};\n\nexport default useOnSubmit;"],"mappings":"uLAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,IAAD,CAAU,CAC1B,cAA0BF,QAAQ,CAAC,EAAD,CAAlC,wCAAOG,KAAP,eAAcC,QAAd,eACAL,SAAS,CAAC,UAAM,4BACZ,GAAMM,CAAAA,KAAK,CAAIH,IAAJ,SAAIA,IAAJ,6BAAIA,IAAI,CAAEA,IAAV,qCAAI,WAAYG,KAA3B,CACA,GAAMC,CAAAA,IAAI,CAAGJ,IAAH,SAAGA,IAAH,8BAAGA,IAAI,CAAEA,IAAT,sCAAG,YAAYK,WAAzB,CACA,GAAMC,CAAAA,SAAS,CAAG,CAACF,IAAI,CAACA,IAAN,CAAWD,KAAK,CAACA,KAAjB,CAAlB,CAEA,GAAGA,KAAH,CAAS,CACLP,KAAK,CAACW,GAAN,uCAAyCJ,KAAzC,EAAiD,CAC7CH,IAAI,CAAEM,SADuC,CAAjD,EAGCE,IAHD,CAGM,SAAAC,GAAG,CAAE,eACP,GAAMC,CAAAA,WAAW,CAAGD,GAAH,SAAGA,GAAH,4BAAGA,GAAG,CAAEE,IAAR,oCAAG,UAAWV,KAA/B,CACAW,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAmCH,WAAnC,EACAR,QAAQ,CAACQ,WAAD,CAAR,CACH,CAPD,EAQH,CACJ,CAfQ,CAeN,CAACV,IAAD,CAfM,CAAT,CAgBA,MAAO,CAACC,KAAD,CAAP,CACH,CAnBD,CAqBA,cAAeF,CAAAA,WAAf"},"metadata":{},"sourceType":"module"}