{"ast":null,"code":"import _slicedToArray from\"/var/www/html/farihatulmaria/farihatulmaria/programming-hero/Module-notes/Module-71/doctor-portal/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from'axios';import{signOut}from'firebase/auth';import React,{useEffect,useState}from'react';import{useAuthState}from'react-firebase-hooks/auth';import{Link,useNavigate}from'react-router-dom';import auth from'../../firebase';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MyAppointment=function MyAppointment(){var _useAuthState=useAuthState(auth),_useAuthState2=_slicedToArray(_useAuthState,1),user=_useAuthState2[0];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),appointments=_useState2[0],setAppointments=_useState2[1];var navigate=useNavigate();useEffect(function(){if(user){axios.get(\"http://localhost:5000/booking?patientEmail=\".concat(user.email),{headers:{'authorization':\"user \".concat(localStorage.getItem('accessToken'))}}).then(function(res){if(res.status===401||res.status===403){signOut(auth);localStorage.removeItem('accessToken');navigate('/');}setAppointments(res.data);});}},[user]);return/*#__PURE__*/_jsxs(\"div\",{className:\"myAppointments\",children:[appointments.length===0?\"\":\"MyAppointment : \".concat(appointments.length),appointments.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-around h-40\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"font-bold text-3xl mx-4\",children:\"Sorry But, You Haven't Booked Yet\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto my-5\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Service\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Time\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Payment\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:appointments.map(function(a,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:a.patient}),/*#__PURE__*/_jsx(\"td\",{children:a.treatment}),/*#__PURE__*/_jsx(\"td\",{children:a.date}),/*#__PURE__*/_jsx(\"td\",{children:a.time}),/*#__PURE__*/_jsxs(\"td\",{children:[a.price&&!a.paid&&/*#__PURE__*/_jsx(Link,{to:\"/dashboard/payment/\".concat(a._id),children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-xs btn-success\",children:\"pay\"})}),a.price&&a.paid&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"text-success\",children:\"Paid\"})}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Transaction id: \",/*#__PURE__*/_jsx(\"span\",{className:\"text-success\",children:a.transactionId})]})]})]})]},index+1);})})]})})]});};export default MyAppointment;","map":{"version":3,"names":["axios","signOut","React","useEffect","useState","useAuthState","Link","useNavigate","auth","MyAppointment","user","appointments","setAppointments","navigate","get","email","headers","localStorage","getItem","then","res","status","removeItem","data","length","map","a","index","patient","treatment","date","time","price","paid","_id","transactionId"],"sources":["/var/www/html/farihatulmaria/farihatulmaria/programming-hero/Module-notes/Module-71/doctor-portal/src/Pages/Dashboard/MyAppointment.jsx"],"sourcesContent":["import axios from 'axios';\nimport { signOut } from 'firebase/auth';\nimport React, { useEffect, useState } from 'react';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { Link, useNavigate } from 'react-router-dom';\nimport auth from '../../firebase';\nconst MyAppointment = () => {\n    const [user] = useAuthState(auth);\n    const [appointments, setAppointments] = useState([]);\n    const  navigate = useNavigate();\n    useEffect(() => {\n      if(user){\n        axios.get(`http://localhost:5000/booking?patientEmail=${user.email}`,{\n              headers:{\n                  'authorization':`user ${localStorage.getItem('accessToken')}`\n              },\n          }) \n          .then(res=>{\n            if(res.status === 401 || res.status === 403){\n                signOut(auth);\n                localStorage.removeItem('accessToken');\n                navigate('/')\n            } \n            setAppointments(res.data)\n        })\n      }\n    }, [user])\n    \n    return (\n        <div className='myAppointments'>\n            {appointments.length === 0 ? \"\" : `MyAppointment : ${appointments.length}`}\n            {\n                appointments.length === 0 ?\n                <div className='flex items-center justify-around h-40'>\n                    <h1 className='font-bold text-3xl mx-4'>Sorry But, You Haven't Booked Yet</h1>\n                </div>\n                :\n                <div className=\"overflow-x-auto my-5\">\n                    <table className=\"table w-full\">\n                        <thead>\n                            <tr>\n                                <th></th>\n                                <th>Name</th>\n                                <th>Service</th>\n                                <th>Date</th>\n                                <th>Time</th>\n                                <th>Payment</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {\n                                appointments.map((a,index)=>\n                                <tr key={index + 1}>\n                                    <td>{index + 1}</td>\n                                    <td>{a.patient}</td>\n                                    <td>{a.treatment}</td>\n                                    <td>{a.date}</td>\n                                    <td>{a.time}</td>\n                                    <td>\n                                        {(a.price && !a.paid) && <Link to={`/dashboard/payment/${a._id}`}><button className='btn btn-xs btn-success'>pay</button></Link>}\n                                        {(a.price && a.paid) && <div>\n                                            <p><span className='text-success'>Paid</span></p>\n                                            <p>Transaction id: <span className='text-success'>{a.transactionId}</span></p>\n                                        </div>}\n                                    </td>\n                                </tr>)\n                            }\n                        </tbody>\n                    </table>\n                </div>\n            }\n        </div>\n    );\n};\n\nexport default MyAppointment;"],"mappings":"uLAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,OAAT,KAAwB,eAAxB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,YAAT,KAA6B,2BAA7B,CACA,OAASC,IAAT,CAAeC,WAAf,KAAkC,kBAAlC,CACA,MAAOC,CAAAA,IAAP,KAAiB,gBAAjB,C,wFACA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CACxB,kBAAeJ,YAAY,CAACG,IAAD,CAA3B,gDAAOE,IAAP,mBACA,cAAwCN,QAAQ,CAAC,EAAD,CAAhD,wCAAOO,YAAP,eAAqBC,eAArB,eACA,GAAOC,CAAAA,QAAQ,CAAGN,WAAW,EAA7B,CACAJ,SAAS,CAAC,UAAM,CACd,GAAGO,IAAH,CAAQ,CACNV,KAAK,CAACc,GAAN,sDAAwDJ,IAAI,CAACK,KAA7D,EAAqE,CAC/DC,OAAO,CAAC,CACJ,+BAAwBC,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAxB,CADI,CADuD,CAArE,EAKGC,IALH,CAKQ,SAAAC,GAAG,CAAE,CACT,GAAGA,GAAG,CAACC,MAAJ,GAAe,GAAf,EAAsBD,GAAG,CAACC,MAAJ,GAAe,GAAxC,CAA4C,CACxCpB,OAAO,CAACO,IAAD,CAAP,CACAS,YAAY,CAACK,UAAb,CAAwB,aAAxB,EACAT,QAAQ,CAAC,GAAD,CAAR,CACH,CACDD,eAAe,CAACQ,GAAG,CAACG,IAAL,CAAf,CACH,CAZD,EAaD,CACF,CAhBQ,CAgBN,CAACb,IAAD,CAhBM,CAAT,CAkBA,mBACI,aAAK,SAAS,CAAC,gBAAf,WACKC,YAAY,CAACa,MAAb,GAAwB,CAAxB,CAA4B,EAA5B,2BAAoDb,YAAY,CAACa,MAAjE,CADL,CAGQb,YAAY,CAACa,MAAb,GAAwB,CAAxB,cACA,YAAK,SAAS,CAAC,uCAAf,uBACI,WAAI,SAAS,CAAC,yBAAd,+CADJ,EADA,cAKA,YAAK,SAAS,CAAC,sBAAf,uBACI,eAAO,SAAS,CAAC,cAAjB,wBACI,oCACI,mCACI,aADJ,cAEI,4BAFJ,cAGI,+BAHJ,cAII,4BAJJ,cAKI,4BALJ,cAMI,+BANJ,GADJ,EADJ,cAWI,uBAEQb,YAAY,CAACc,GAAb,CAAiB,SAACC,CAAD,CAAGC,KAAH,qBACjB,mCACI,oBAAKA,KAAK,CAAG,CAAb,EADJ,cAEI,oBAAKD,CAAC,CAACE,OAAP,EAFJ,cAGI,oBAAKF,CAAC,CAACG,SAAP,EAHJ,cAII,oBAAKH,CAAC,CAACI,IAAP,EAJJ,cAKI,oBAAKJ,CAAC,CAACK,IAAP,EALJ,cAMI,sBACML,CAAC,CAACM,KAAF,EAAW,CAACN,CAAC,CAACO,IAAf,eAAwB,KAAC,IAAD,EAAM,EAAE,8BAAwBP,CAAC,CAACQ,GAA1B,CAAR,uBAAyC,eAAQ,SAAS,CAAC,wBAAlB,iBAAzC,EAD7B,CAEMR,CAAC,CAACM,KAAF,EAAWN,CAAC,CAACO,IAAd,eAAuB,oCACpB,gCAAG,aAAM,SAAS,CAAC,cAAhB,kBAAH,EADoB,cAEpB,qDAAmB,aAAM,SAAS,CAAC,cAAhB,UAAgCP,CAAC,CAACS,aAAlC,EAAnB,GAFoB,GAF5B,GANJ,GAASR,KAAK,CAAG,CAAjB,CADiB,EAAjB,CAFR,EAXJ,GADJ,EARR,GADJ,CA6CH,CAnED,CAqEA,cAAelB,CAAAA,aAAf"},"metadata":{},"sourceType":"module"}