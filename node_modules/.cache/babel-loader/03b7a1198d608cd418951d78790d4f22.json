{"ast":null,"code":"import _objectSpread from\"/var/www/html/farihatulmaria/farihatulmaria/programming-hero/Module-notes/Module-71/doctor-portal/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/var/www/html/farihatulmaria/farihatulmaria/programming-hero/Module-notes/Module-71/doctor-portal/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/var/www/html/farihatulmaria/farihatulmaria/programming-hero/Module-notes/Module-71/doctor-portal/node_modules/@babel/runtime/regenerator/index.js\";import React from'react';import{useForm}from'react-hook-form';import{useQuery}from'react-query';import{toast}from'react-toastify';import Loading from'../../Components/Loading/Loading';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddDoctor=function AddDoctor(){var _errors$name,_errors$email,_errors$email2,_errors$name2;var _useForm=useForm(),register=_useForm.register,errors=_useForm.formState.errors,reset=_useForm.reset,handleSubmit=_useForm.handleSubmit;var imageStorage_KEY='819f223923061b4eb407559d94688bce';var _useQuery=useQuery('services',function(){return fetch(\"http://localhost:5000/services\",{method:'GET',headers:{'authorization':\"user \".concat(localStorage.getItem('accessToken'))}}).then(function(res){return res.json();});}),isLoading=_useQuery.isLoading,error=_useQuery.error,services=_useQuery.data;var addADoctor=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){var image,formData,url;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:image=data.image[0];formData=new FormData();formData.append('image',image);url=\"https://api.imgbb.com/1/upload?expiration=600&key=\".concat(imageStorage_KEY);fetch(url,{method:'POST',body:formData}).then(function(res){return res.json();}).then(function(result){if(result.success){var img=result.data.url;var doctor={name:data.name,email:data.email,specialty:data.specialty,img:img};var _url='http://localhost:5000/doctors';fetch(_url,{method:'POST',headers:{'content-type':'application/json','authorization':\"user \".concat(localStorage.getItem('accessToken'))},body:JSON.stringify(doctor)}).then(function(res){return res.json();}).then(function(inserted){if(inserted.insertedId){toast.success('Doctor added successfully');reset();}else{toast.error('Failed to add the doctor');}});}});case 5:case\"end\":return _context.stop();}}},_callee);}));return function addADoctor(_x){return _ref.apply(this,arguments);};}();if(isLoading){return/*#__PURE__*/_jsx(Loading,{});}return/*#__PURE__*/_jsx(\"div\",{className:\"SignUp\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flexible h-[700px]\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card w-96 bg-base-100 shadow-xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"card-title font-light mx-auto my-3\",children:\"Add a Doctor\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(addADoctor),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Name\"})}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"text\",placeholder:\"Doctor's Name\"},register(\"name\",{required:{value:true,message:'Name is Required'}}))),/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:((_errors$name=errors.name)===null||_errors$name===void 0?void 0:_errors$name.type)==='required'&&/*#__PURE__*/_jsx(\"span\",{className:\"label-text-alt text-red-500\",children:errors.name.message})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Email\"})}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"email\",placeholder:\"Doctor's Email\"},register(\"email\",{required:{value:true,message:'Email is Required'},pattern:{value:/[a-z0-9]+@[a-z]+\\.[a-z]{2,3}/,message:'Provide a valid Email'}}))),/*#__PURE__*/_jsxs(\"label\",{className:\"label\",children:[((_errors$email=errors.email)===null||_errors$email===void 0?void 0:_errors$email.type)==='required'&&/*#__PURE__*/_jsx(\"span\",{className:\"label-text-alt text-red-500\",children:errors.email.message}),((_errors$email2=errors.email)===null||_errors$email2===void 0?void 0:_errors$email2.type)==='pattern'&&/*#__PURE__*/_jsx(\"span\",{className:\"label-text-alt text-red-500\",children:errors.email.message})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Specialty\"})}),/*#__PURE__*/_jsx(\"select\",_objectSpread(_objectSpread({},register('specialty')),{},{className:\"select  input-bordered input-primary max-w-xs\",children:services.map(function(service){return/*#__PURE__*/_jsx(\"option\",{value:service===null||service===void 0?void 0:service.name,children:service===null||service===void 0?void 0:service.name},service===null||service===void 0?void 0:service._id);})}))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Photo\"})}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"file\",name:\"file\",id:\"file\"},register(\"image\",{required:{value:true,message:'Image is Required'}}))),/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:((_errors$name2=errors.name)===null||_errors$name2===void 0?void 0:_errors$name2.type)==='required'&&/*#__PURE__*/_jsx(\"span\",{className:\"label-text-alt text-red-500\",children:errors.name.message})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"w-full my-3\",value:\"Add\",children:\"Add\"})]})]})})})});};export default AddDoctor;","map":{"version":3,"names":["React","useForm","useQuery","toast","Loading","AddDoctor","register","errors","formState","reset","handleSubmit","imageStorage_KEY","fetch","method","headers","localStorage","getItem","then","res","json","isLoading","error","services","data","addADoctor","image","formData","FormData","append","url","body","result","success","img","doctor","name","email","specialty","JSON","stringify","inserted","insertedId","required","value","message","type","pattern","map","service","_id"],"sources":["/var/www/html/farihatulmaria/farihatulmaria/programming-hero/Module-notes/Module-71/doctor-portal/src/Pages/AddDoctor/AddDoctor.jsx"],"sourcesContent":["import React from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useQuery } from 'react-query';\nimport { toast } from 'react-toastify';\nimport Loading from '../../Components/Loading/Loading';\nconst AddDoctor = () => {\n    const { register,formState: { errors },reset, handleSubmit } = useForm();\n    const imageStorage_KEY = '819f223923061b4eb407559d94688bce';\n\n    const { isLoading, error, data:services } = useQuery('services', () =>\n    fetch(`http://localhost:5000/services`,{\n        method:'GET',\n        headers:{\n            'authorization': `user ${localStorage.getItem('accessToken')}`\n        }\n    }).then(res =>\n      res.json())\n    )\n    const addADoctor = async (data) =>{\n        const image = data.image[0];\n        const formData = new FormData();\n        formData.append('image', image);\n        \n        const url = `https://api.imgbb.com/1/upload?expiration=600&key=${imageStorage_KEY}`;\n        fetch(url,{\n            method:'POST',\n            body: formData\n        })\n        .then(res =>res.json())\n        .then(result=>{\n            if(result.success){\n                const img = result.data.url;\n                const doctor = {\n                    name: data.name,\n                    email: data.email,\n                    specialty: data.specialty,\n                    img,\n                }\n                const url = 'http://localhost:5000/doctors';\n                 fetch(url, {\n                    method: 'POST',\n                    headers: {\n                        'content-type':'application/json',\n                        'authorization':`user ${localStorage.getItem('accessToken')}`\n                    },\n                    body: JSON.stringify(doctor),\n                })\n                .then(res =>res.json())\n                .then(inserted =>{\n                    if(inserted.insertedId){\n                        toast.success('Doctor added successfully')\n                        reset();\n                    }\n                    else{\n                        toast.error('Failed to add the doctor');\n                    }\n                })\n\n            }  \n        })\n    }\n\n    if(isLoading){\n        return <Loading/>\n    }\n    return (\n        <div className='SignUp'>\n        <div className=\"flexible h-[700px]\">\n             <div className=\"card w-96 bg-base-100 shadow-xl\">\n                     <div className=\"card-body\">\n                         <h2 className=\"card-title font-light mx-auto my-3\">Add a Doctor</h2>\n                         <form onSubmit={handleSubmit(addADoctor)}>\n\n                            <div className=\"form-control\">\n                                <label className=\"label\">\n                                    <span className=\"label-text\">Name</span>\n                                </label>\n                                <input\n                                    type=\"text\"\n                                    placeholder=\"Doctor's Name\"\n                                    {...register(\"name\", {\n                                        required: {\n                                            value: true,\n                                            message: 'Name is Required'\n                                        }\n                                    })}\n                                />\n                                <label className=\"label\">\n                                    {errors.name?.type === 'required' && <span className=\"label-text-alt text-red-500\">{errors.name.message}</span>}\n                                </label>\n                            </div>\n\n                            <div className=\"form-control\">\n                                <label className=\"label\">\n                                    <span className=\"label-text\">Email</span>\n                                </label>\n                                <input\n                                    type=\"email\"\n                                    placeholder=\"Doctor's Email\"\n                                    {...register(\"email\", {\n                                        required: {\n                                            value: true,\n                                            message: 'Email is Required'\n                                        },\n                                        pattern: {\n                                            value: /[a-z0-9]+@[a-z]+\\.[a-z]{2,3}/,\n                                            message: 'Provide a valid Email'\n                                        }\n                                    })}\n                                />\n                                <label className=\"label\">\n                                    {errors.email?.type === 'required' && <span className=\"label-text-alt text-red-500\">{errors.email.message}</span>}\n                                    {errors.email?.type === 'pattern' && <span className=\"label-text-alt text-red-500\">{errors.email.message}</span>}\n                                </label>\n                            </div>\n\n                            <div className=\"form-control\">\n                                <label className=\"label\">\n                                    <span className=\"label-text\">Specialty</span>\n                                </label>\n                                <select {...register('specialty')} className=\"select  input-bordered input-primary max-w-xs\">\n                                    {\n                                        services.map(service => <option\n                                            key={service?._id}\n                                            value={service?.name}\n                                        >{service?.name}</option>)\n                                    }\n                                </select>\n                            </div>\n\n                            <div className=\"form-control\">\n                                <label className=\"label\">\n                                    <span className=\"label-text\">Photo</span>\n                                </label>\n                              <input\n                                    type=\"file\"\n                                    name='file'\n                                    id='file'\n                                    {...register(\"image\", {\n                                        required: {\n                                            value: true,\n                                            message: 'Image is Required'\n                                        }\n                                    })}\n                                /> \n                                <label className=\"label\">\n                                    {errors.name?.type === 'required' && <span className=\"label-text-alt text-red-500\">{errors.name.message}</span>}\n                                </label>\n                            </div>\n                            <button className='w-full my-3' value=\"Add\">Add</button>\n                        </form>\n                     </div>\n             </div>\n        </div>\n     </div>\n    );\n};\n\nexport default AddDoctor;"],"mappings":"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"},"metadata":{},"sourceType":"module"}