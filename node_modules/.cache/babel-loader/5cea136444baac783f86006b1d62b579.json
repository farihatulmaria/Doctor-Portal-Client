{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport { useEffect, useState } from 'react';\n\nconst useOnSubmit = user => {\n  _s();\n\n  const [token, setToken] = useState('');\n  useEffect(() => {\n    var _user$user, _user$user2;\n\n    const email = user === null || user === void 0 ? void 0 : (_user$user = user.user) === null || _user$user === void 0 ? void 0 : _user$user.email;\n    const name = user === null || user === void 0 ? void 0 : (_user$user2 = user.user) === null || _user$user2 === void 0 ? void 0 : _user$user2.displayName;\n    const tokenUser = {\n      name: name,\n      email: email\n    };\n\n    if (email) {\n      axios.put(`http://localhost:5000/users/${email}`, {\n        user: tokenUser\n      }).then(res => {\n        var _res$data;\n\n        const accessToken = res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.token;\n        localStorage.setItem('accessToken', accessToken);\n        setToken(accessToken);\n      });\n    }\n  }, [user]);\n  return [token];\n};\n\n_s(useOnSubmit, \"vf+oyXHY90mQMbpq6nUOg8QmBuc=\");\n\nexport default useOnSubmit;","map":{"version":3,"names":["axios","useEffect","useState","useOnSubmit","user","token","setToken","email","name","displayName","tokenUser","put","then","res","accessToken","data","localStorage","setItem"],"sources":["/var/www/html/farihatulmaria/farihatulmaria/programming-hero/Module-notes/Module-71/doctor-portal/src/hooks/useToken.jsx"],"sourcesContent":["import axios from 'axios';\nimport { useEffect, useState } from 'react';\nconst useOnSubmit = (user) => {\n    const [token, setToken] = useState('');\n    useEffect(() => {\n        const email =  user?.user?.email;\n        const name = user?.user?.displayName;\n        const tokenUser = {name:name,email:email};\n        \n        if(email){\n            axios.put(`http://localhost:5000/users/${email}`,{\n                user: tokenUser,\n            })\n            .then(res=>{\n                const accessToken = res?.data?.token;\n                localStorage.setItem('accessToken',accessToken)\n                setToken(accessToken)\n            })\n        }\n    }, [user])\n    return [token]\n};\n\nexport default useOnSubmit;"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,OAApC;;AACA,MAAMC,WAAW,GAAIC,IAAD,IAAU;EAAA;;EAC1B,MAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBJ,QAAQ,CAAC,EAAD,CAAlC;EACAD,SAAS,CAAC,MAAM;IAAA;;IACZ,MAAMM,KAAK,GAAIH,IAAJ,aAAIA,IAAJ,qCAAIA,IAAI,CAAEA,IAAV,+CAAI,WAAYG,KAA3B;IACA,MAAMC,IAAI,GAAGJ,IAAH,aAAGA,IAAH,sCAAGA,IAAI,CAAEA,IAAT,gDAAG,YAAYK,WAAzB;IACA,MAAMC,SAAS,GAAG;MAACF,IAAI,EAACA,IAAN;MAAWD,KAAK,EAACA;IAAjB,CAAlB;;IAEA,IAAGA,KAAH,EAAS;MACLP,KAAK,CAACW,GAAN,CAAW,+BAA8BJ,KAAM,EAA/C,EAAiD;QAC7CH,IAAI,EAAEM;MADuC,CAAjD,EAGCE,IAHD,CAGMC,GAAG,IAAE;QAAA;;QACP,MAAMC,WAAW,GAAGD,GAAH,aAAGA,GAAH,oCAAGA,GAAG,CAAEE,IAAR,8CAAG,UAAWV,KAA/B;QACAW,YAAY,CAACC,OAAb,CAAqB,aAArB,EAAmCH,WAAnC;QACAR,QAAQ,CAACQ,WAAD,CAAR;MACH,CAPD;IAQH;EACJ,CAfQ,EAeN,CAACV,IAAD,CAfM,CAAT;EAgBA,OAAO,CAACC,KAAD,CAAP;AACH,CAnBD;;GAAMF,W;;AAqBN,eAAeA,WAAf"},"metadata":{},"sourceType":"module"}