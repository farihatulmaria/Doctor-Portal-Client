{"ast":null,"code":"import _slicedToArray from\"/var/www/html/farihatulmaria/farihatulmaria/programming-hero/Module-notes/Module-71/doctor-portal/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from'axios';import{format}from'date-fns';import React from'react';import{useAuthState}from'react-firebase-hooks/auth';import{toast}from'react-toastify';import auth from'../../firebase';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var BookingForm=function BookingForm(_ref){var refetch=_ref.refetch,treatment=_ref.treatment,Date=_ref.Date,setTreatment=_ref.setTreatment;var _useAuthState=useAuthState(auth),_useAuthState2=_slicedToArray(_useAuthState,1),user=_useAuthState2[0];var _id=treatment._id,name=treatment.name,slots=treatment.slots,price=treatment.price;var date=format(Date,'PP');var handleBooking=function handleBooking(e){e.preventDefault();var event=e.target;var slot=event.slot.value;var time=event.slot.value;var patient=user.displayName;var phone=event.phone.value;var email=user.email;var booking={patient:patient,email:email,phone:phone,date:date,time:time,treatment:name,price:price,treatmentId:_id};var url='http://localhost:5000/booking';axios.post(url,{headers:{'authorization':\"user \".concat(localStorage.getItem('accessToken'))},booking:booking}).then(function(res){var data=res.data;if(data.success){toast.success(\"Appointment is set, \".concat(date,\" at \").concat(slot));}else{var _data$booking;toast.error(\"Already have and appointment on \".concat(data===null||data===void 0?void 0:(_data$booking=data.booking)===null||_data$booking===void 0?void 0:_data$booking.date,\" at \").concat(slot));}refetch();setTreatment(null);});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"booking-modal\",className:\"modal-toggle\"}),/*#__PURE__*/_jsx(\"div\",{className:\"modal modal-bottom sm:modal-middle\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-box\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"booking-modal\",className:\"btn bg-gradient-to-r border-0 from-secondary to-primary btn-sm btn-circle text-white absolute right-2 top-2\",children:\"\\u2715\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-lg my-3 -mt-1 mb-5\",children:name}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleBooking,className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"date\",placeholder:\"Date\",className:\"!bg-slate-200\",value:date,readOnly:true}),/*#__PURE__*/_jsxs(\"select\",{name:\"slot\",className:\"select select-primary w-full max-w-lg\",children:[/*#__PURE__*/_jsx(\"option\",{disabled:true,selected:true,children:\"Select Your Time\"}),slots.map(function(slot,index){return/*#__PURE__*/_jsx(\"option\",{children:slot},index);})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",className:\"!bg-slate-200\",value:user===null||user===void 0?void 0:user.displayName,placeholder:\"Full Name\",required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:user===null||user===void 0?void 0:user.email,placeholder:\"Email\",className:\"!bg-slate-200\",readOnly:true}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",name:\"phone\",placeholder:\"Phone Number\",required:true}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-block\",type:\"submit\",children:\"Submit\"})]})]})})]});};export default BookingForm;","map":{"version":3,"names":["axios","format","React","useAuthState","toast","auth","BookingForm","refetch","treatment","Date","setTreatment","user","_id","name","slots","price","date","handleBooking","e","preventDefault","event","target","slot","value","time","patient","displayName","phone","email","booking","treatmentId","url","post","headers","localStorage","getItem","then","res","data","success","error","map","index"],"sources":["/var/www/html/farihatulmaria/farihatulmaria/programming-hero/Module-notes/Module-71/doctor-portal/src/Components/Booking/BookingForm.jsx"],"sourcesContent":["import axios from 'axios';\nimport { format } from 'date-fns';\nimport React from 'react';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { toast } from 'react-toastify';\nimport auth from '../../firebase';\nconst BookingForm = ({refetch,treatment,Date,setTreatment}) => {\n    const [user] = useAuthState(auth);\n    const {_id,name,slots,price}= treatment;\n    const date = format(Date,'PP');\n    const handleBooking =(e)=>{\n        e.preventDefault();\n        const event = e.target; \n        const slot = event.slot.value;\n        const time =  event.slot.value;\n        const patient =  user.displayName;\n        const phone =  event.phone.value;\n        const email =  user.email;\n        const booking ={\n            patient,\n            email,\n            phone, \n            date,\n            time,\n            treatment:name,\n            price,\n            treatmentId:_id,\n        }\n        const url = 'http://localhost:5000/booking';\n        axios.post(url,{ \n            headers:{\n                'authorization':`user ${localStorage.getItem('accessToken')}`\n            },\n            booking:booking,\n        })\n        .then(res => {\n            const data = res.data;\n            if(data.success){\n                toast.success(`Appointment is set, ${date} at ${slot}`)\n            }\n            else{\n                toast.error(`Already have and appointment on ${data?.booking?.date} at ${slot}`)\n            }\n            refetch()\n            setTreatment(null);\n        })\n    }\n    return (\n        <div>\n            <input type=\"checkbox\" id=\"booking-modal\" className=\"modal-toggle\" />\n            <div className=\"modal modal-bottom sm:modal-middle\">\n                <div className=\"modal-box\">\n                    <label htmlFor=\"booking-modal\" className=\"btn bg-gradient-to-r border-0 from-secondary to-primary btn-sm btn-circle text-white absolute right-2 top-2\">âœ•</label>\n                    <h3 className=\"font-bold text-lg my-3 -mt-1 mb-5\">{name}</h3>\n                    <form onSubmit={handleBooking} className=\"space-y-4\">\n                        <input type=\"text\" name='date' placeholder=\"Date\" className=\"!bg-slate-200\" value={date} readOnly />\n\n                        <select name='slot' className=\"select select-primary w-full max-w-lg\">\n                            <option disabled selected>Select Your Time</option>\n                            {\n                                slots.map((slot,index)=> <option key={index}>{slot}</option>)\n                            }\n                        </select>\n                        <input type=\"text\" name='name' className=\"!bg-slate-200\" value={user?.displayName} placeholder=\"Full Name\" required/>\n                        <input type=\"email\" name='email' value={user?.email} placeholder=\"Email\" className=\"!bg-slate-200\" readOnly/>\n                        <input type=\"tel\" name='phone' placeholder=\"Phone Number\" required/>\n                        <button className=\"btn-block\" type='submit'>Submit</button>\n                    </form>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default BookingForm;"],"mappings":"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"},"metadata":{},"sourceType":"module"}